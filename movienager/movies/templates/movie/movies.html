{% extends 'index.html' %}

{% load ratings %}

{% block styling_and_scripts %}
<link rel="stylesheet" href="../static/style/table.css">
<link rel="stylesheet" href="../static/style/style.css">
<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;500;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&display=swap" rel="stylesheet"> 
<style>
    .star-ratings-rating-average, .star-ratings-rating-count, .star-ratings-rating-user {
        display: none;
    }
</style>
{% endblock styling_and_scripts %}

{% block title %}
    Movies
{% endblock title %}

{% block main %}
    <img class="background" src="../static/assets/cinema-4609877_1920-min.jpg" alt="">
    <main class="container-fluid">
    <div class="table-responsive p-3">
        <table class="table table-borderless" id="dataTable">
            {% comment %} {% include 'partials/thead.html' with obj=object_list.0 %} {% endcomment %}
            <thead>
                <tr>
                    <th></th>
                    <th>Movie</th>
                    <th>Year</th>
                    <th>Director</th>
                    <th>Starring</th>
                    {% comment %} <th>Rating</th> {% endcomment %}
                </tr>
            </thead>
            <tbody>
            {% block table_content %}
                {% for movie in movies %}
                <tr>
                    <td><img class="photo" src="{{ movie.poster.url }}" alt="{{ movie.title }}"></td>
                    <td>
                        <h3>{{ movie.title }}</h3>
                        {% ratings movie icon_height=20 icon_width=20 %}
                        <p>{{ movie.short_desc|truncatechars:230 }}</p>
                        <a href="{% url 'movie-edit' movie.id %}"><button class="btn btn-outline-info m-1">Edit</button></a>
                        <a href="{% url 'movie-delete' movie.id %}"><button class="btn btn-outline-danger m-1">Delete</button></a>
                    <td>{{ movie.prod_year }}</td>
                    {% comment %} <td>{{ movie.short_desc|truncatechars:100 }}</td> {% endcomment %}
                    <td>{{ movie.directed_by }}</td>
                    <td>
                    {% for person in movie.starring.all %}
                        {{ person.name }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                    </td>
                    {% comment %} {% include 'partials/buttons.html' with obj=movie edit_page="movie-edit" delete_page="movie-delete" %} {% endcomment %}
                </tr>
                {% endfor %}
            {% endblock table_content %}
            </tbody>
        </table>
    </div>
    </main>
    {% block scripts %}
    {% include 'partials/auth-scripts.html' %}

    <!-- Page level plugins -->
    <script src="../static/vendor/datatables/jquery.dataTables.min.js"></script>
    <script src="../static/vendor/datatables/dataTables.bootstrap4.min.js"></script>

    <!-- Page level custom scripts -->
    <script src="../static/js/demo/datatables-demo.js"></script>
    <script>
        $('#dataTable').DataTable( {
        paging: false,
        } );
    </script>
    {% endblock scripts %}
{% endblock main %}
