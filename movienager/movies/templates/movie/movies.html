{% extends 'index.html' %}

{% load ratings %}

{% block styling_and_scripts %}
<link rel="stylesheet" href="../static/style/table.css">
<link rel="stylesheet" href="../static/style/style.css">
<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;500;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&display=swap" rel="stylesheet"> 
<style>
    .star-ratings-rating-average, .star-ratings-rating-count, .star-ratings-rating-user {
        display: none;
    }
</style>
{% endblock styling_and_scripts %}

{% block title %}
    Movies
{% endblock title %}

{% block main %}
    <main class="container-fluid">
    <div class="table-container table-responsive p-3">
        <table class="table table-borderless" id="dataTable">
            {% block table_content %}
            <thead>
                <tr>
                    <th></th>
                    <th class="main-column">Movie</th>
                    <th>Year</th>
                    <th>Director</th>
                    <th>Starring</th>
                </tr>
            </thead>
            <tbody>
                {% for movie in movies %}
                <tr>
                    <td align="center"><img class="photo" src="{{ movie.poster.url }}" alt="{{ movie.title }}"></td>
                    <td class="main-column">
                        {% include 'partials/about.html' with obj=movie edit_page="movie-edit" delete_page="movie-delete" %}
                    <td>{{ movie.prod_year }}</td>
                    <td>{{ movie.directed_by }}</td>
                    <td>
                    {% for person in movie.starring.all %}
                        {{ person.name }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                    </td>
                </tr>
                {% endfor %}
            {% endblock table_content %}
            </tbody>
        </table>
    </div>
    </main>
    {% block scripts %}
    {% include 'partials/auth-scripts.html' %}

    <!-- Page level plugins -->
    <script src="../static/vendor/datatables/jquery.dataTables.min.js"></script>
    <script src="../static/vendor/datatables/dataTables.bootstrap4.min.js"></script>

    <!-- Page level custom scripts -->
    <script src="../static/js/demo/datatables-demo.js"></script>
    <script>
        $('#dataTable').DataTable( {
        paging: false,
        } );
    </script>
    {% endblock scripts %}
{% endblock main %}
